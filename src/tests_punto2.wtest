import mundo.*
import rolando.*
import artefactos.*

describe "Tests sobre la habilidad de lucha de ronaldo" {
     const espadaDelDestino
     const rolando
     const unaMascara
     const otraMascara
	fixture {
		mundo.fuerzaOscura(5)
		collarDivino.perlas(5)
		rolando = new Jugador()
		rolando.valorBaseHechiceria(3)
		rolando.valorBaseLucha(1)
		espadaDelDestino = new Arma()
		unaMascara = new MascaraOscura(indiceDeOscuridad=1)
		rolando.artefactos([ espadaDelDestino, collarDivino, unaMascara ])
		otraMascara = new MascaraOscura(indiceDeOscuridad=0)
	}

	test "Si ronaldo no tiene artefactos, su habilidad de lucha es 1" {
		rolando.desequipateTodo()
		assert.equals(rolando.habilidadDeLucha(), 1)
	}

	test "La habilidad de ronaldo con todos los artefactos es de 13" {
		assert.equals(rolando.habilidadDeLucha(), 13)
	}

	test "Si el collar divino tiene 3 perlas, la habilidad de lucha de ronaldo es de 11" {
		collarDivino.perlas(3)
		assert.equals(rolando.habilidadDeLucha(), 11)
	}

	test "Si el valor base de ronaldo es 8, su habilidad de lucha es 20" {
		rolando.valorBaseLucha(8)
		assert.equals(rolando.habilidadDeLucha(), 20)
	}

	test "Luego de un eclipse, la unidad de lucha de una mascara oscura es 5" {
		mundo.ocurreUnEclipse()
		assert.equals(unaMascara.unidadDeLucha(rolando), 5)
	}

	test "Si se elimina la mascara oscura de los artefactos de ronaldo, su habilidad es 9" {
		rolando.desequipate(unaMascara)
		assert.equals(rolando.habilidadDeLucha(), 9)
	}



test "Se agrega una mascara oscura(indice de oscuridad = 0) a rolando, su unidad de lucha es 4" {
		rolando.equipate(otraMascara)
		assert.equals(otraMascara.unidadDeLucha(rolando), 4)
		
	   }
test "Se agrega una mascara oscura(indice de oscuridad = 0,valor Minimo =2) a rolando, su unidad de lucha es 2" {
		otraMascara.minimoPoder(2)
		rolando.equipate(otraMascara)
		assert.equals(otraMascara.unidadDeLucha(rolando), 2)
			
	}
	   }	   
	